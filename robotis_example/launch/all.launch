
<launch>
    <node name="robotis_manager" pkg="robotis_controller" type="robotis_manager" output="screen">
        <rosparam command="load" file="$(find robotis_example)/launch/ROBOTIS-OP2.yaml" />
        <rosparam param="joint_state_publish_rate">125</rosparam>
        <rosparam param="publish_joint_topic_name">"/robot_joint_states"</rosparam>
        <rosparam param="subscribe_joint_topic_name">"/controller_joint_states"</rosparam>
    </node>
    <node name="example_read_write" pkg="robotis_example" type="example_read_write" output="screen" />

  <param name="robot_description" command="rosrun xacro xacro.py $(find robotis_op2_description)/urdf/robotis_op2.urdf.xacro" />
  <node pkg="robot_state_publisher" name="robot_state_publisher"
        type="robot_state_publisher" output="screen" >
    <remap from="joint_states" to="robot_joint_states" />
  </node>
  <node pkg="hector_imu_attitude_to_tf" type="imu_attitude_to_tf_node" name="imu_to_tf" >
    <remap from="imu_topic" to="imu" />
    <param name="base_frame" value="base_link" />
    <param name="base_stabilized_frame" value="odom" />
    </node>
  <node pkg="tf" type="static_transform_publisher" name="base_to_footprint"
        args="0 0 0 0 0 0 base_link base_footprint 10" />
  <node pkg="tf" type="static_transform_publisher" name="map_to_odom"
        args="0 0 0 0 0 0 map odom 10" />

  <node pkg="robotis_op2_camera" type="uvc_camera_node" name="robotis_op_camera" output="screen">
    <param name="width" type="int" value="640" />
    <param name="height" type="int" value="480" />
    <param name="fps" type="int" value="15" />
    <param name="frame_id" type="string" value="head_cam_link" />

    <!--param name="auto_focus" type="bool" value="False" />
    <param name="focus_absolute" type="int" value="0" /-->
    <param name="gain" value="255" />
    <param name="auto_exposure" type="bool" value="False" />
    <param name="exposure_absolute" value="1000" />
    <!--param name="exposure_auto_priority" value="0" /-->    
    <param name="brightness" value="127" />
    <param name="auto_white_balance" type="bool" value="False" />
    <param name="white_balance_temperature" value="2800" />
    <!-- other supported params: auto_exposure, exposure_absolute, brightness, power_line_frequency -->
      
    <param name="device" type="string" value="/dev/video0" />
    <param name="camera_info_url" type="string" value="file://$(find robotis_op2_camera)/camera_info/camera.yaml" />
  </node>

   <arg  name="config_path" default="$(find ball_detector)/launch/ball_detector_params.yaml"/>

    <node pkg="ball_detector" type="ball_detector_node" name="ball_detector_node" args="" output="screen">
        <rosparam command="load" file="$(arg config_path)"/>  
	<!-- yaml path to save config -->
        <param name="yaml_path" type="string" value="$(arg config_path)"/>
        <remap from="/ball_detector_node/image_in" to="/image_raw" />
        <remap from="/ball_detector_node/cameraInfo_in" to="/camera_info" />
    </node>

</launch> 